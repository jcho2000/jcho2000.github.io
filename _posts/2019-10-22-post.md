---
layout: post
title: RaspberryPi OS 용량 줄이기
subtitle: SD Card 용량 줄이기
categories: Development
tags: [RaspberryPi, Embedded, Raspbian, dd]
---
## SD카드 백업시 애로사항

RaspberryPi 환경에서 개발을 진행하며 다양한 프로젝트의 버전관리를 SD카드 백업을 통해 진행하였다.

SD카드를 백업하는 일이 잦아 시간을 뺏기는 경우가 많았다.

RaspberryPi 시스템 관련 파일과 실제 동작하는 프로그램은 수 GB를 넘기지 않지만,

Win32Imager 로 백업된 파일은 전체 SD카드 전체용량과 동일한 용량으로 이미지 파일로 백업되고, 백업에 시간도 오래 걸린다.

심각한 경우, 같은 용량의 SD카드를 사용하더라도 제작사마다 실제 가용 용량이 조금씩 다르기 때문에

**실제로 32GB SD카드를 읽어(Read) 백업한 이미지 파일을 32GB SD카드에 쓸(Write) 수 없는 경우도 생겼다.**


## 해결방법
### 1. GParted

Linux 디스크 파티션 Edit 툴인 GParted를 사용한다.

준비물 : GParted 어플리케이션을 설치한 **Linux 환경 PC** 과 **SD카드 리더기**

### 2. dd 

이미지 파일을 윈도우즈 어플리케이션인 Win32Imager와 SD카드 리더기를 통해 만드는 대신,

RaspberryPi 를 실행한 상태에서, 직접 dd 커맨드를 통해 이미지를 생성한다.

(Duplicate Disk 약어가 아닐까 생각하니 까먹지 않음ㅋ)

RaspberryPi 에서 아래 커맨드를 입력하여 SD카드의 파티션 정보를 확인한다.

~~~
sudo fdisk -l /dev/mmcblko
~~~

(그림)

출력되는 정보의 SectorSize, End 부분을 확인한다.
~~~

~~~


~~~
var foo = function(x) {
  return(x + 5);
}
foo(3)
~~~

And here is the same code with syntax highlighting:

```javascript
var foo = function(x) {
  return(x + 5);
}
foo(3)
```

And here is the same code yet again but with line numbers:

{% highlight javascript linenos %}
var foo = function(x) {
  return(x + 5);
}
foo(3)
{% endhighlight %}

## Boxes
You can add notification, warning and error boxes like this:

### Notification

{: .box-note}
**Note:** This is a notification box.

### Warning

{: .box-warning}
**Warning:** This is a warning box.

### Error

{: .box-error}
**Error:** This is an error box.
